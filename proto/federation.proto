syntax = "proto3";
package federation;
option go_package = "./pkg/federation";

message Packet {
  string sender_uuid = 1;
  bytes signature = 2;
  oneof content {
    Heartbeat heartbeat = 3;
    FleetMove fleet_move = 4;
    Handshake handshake = 5;
    MarketOrder market_order = 6;
  }
}

message Heartbeat {
  int64 tick = 1;
  int32 peer_count = 2;
  string genesis_hash = 3;
}

message FleetMove {
  int32 fleet_id = 1;
  string origin_system = 2;
  string dest_system = 3;
  int64 arrival_tick = 4;
  bytes compressed_fleet_data = 5;
}

message Handshake {
  string public_key = 1;
  string address = 2;
  string genesis_hash = 3;
}

message MarketOrder {
  string order_id = 1;
  string item = 2;
  int32 price = 3;
  int32 quantity = 4;
  bool is_buy = 5;
  string seller_uuid = 6;
}
