syntax = "proto3";
package federation;
option go_package = "./pkg/federation";

// The master container for all Federation Traffic
message Packet {
    string sender_uuid = 1;
    int64 timestamp = 2;
    bytes signature = 3; // Ed25519 Signature of the 'payload'
    
    oneof content {
        Heartbeat heartbeat = 4;
        FleetMove fleet_move = 5;
    }
}

message Heartbeat {
    int64 tick = 1;
    int32 peer_count = 2;
    string genesis_hash = 3; // Anti-Split-Brain
}

message FleetMove {
    string fleet_id = 1;
    string owner_uuid = 2;
    string dest_system = 3;
    int64 arrival_tick = 4;
    
    // Compressed Colony/Fleet Data (JSON-over-Protobuf for flexibility)
    bytes compressed_state = 5; 
}
